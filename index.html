<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Static Proxy (via CORS Proxy API)</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        #output { width: 100%; min-height: 40vh; border: 1px solid #ccc; margin-top: 1em; white-space: pre-wrap; overflow: auto; }
        input, button { font-size: 1em; }
    </style>
</head>
<body>
    <h1>Static Client-Side Proxy</h1>
    <form id="proxyForm">
        <label for="url">Target URL:</label>
        <input type="url" id="url" style="width:45%" placeholder="https://example.com" required>
        <button type="submit">Fetch</button>
    </form>
    <div id="output"></div>
    <p style="font-size:0.9em;color:gray;">
        Uses <a href="https://corsproxy.io/" target="_blank">corsproxy.io</a>.<br>
        <b>Limitations:</b> This is client-side onlyâ€”cannot fetch pages requiring login, payment, or CORS-blocked resources.<br>
        Deploy this by adding to any repo and enabling GitHub Pages on <code>main</code> or <code>docs</code> branch.<br>
    </p>
    <script>
        async function proxyFetch(url) {
            const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);
            return fetch(proxyUrl).then(async (response) => {
                if (!response.ok) throw new Error("Request failed: " + response.status);
                return response.text();
            });
        }

        document.getElementById('proxyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const url = document.getElementById('url').value;
            const output = document.getElementById('output');
            output.textContent = 'Loading...';
            try {
                const content = await proxyFetch(url);
                // Attempt to render as HTML if content-type is HTML, else show as text.
                output.innerHTML = (content.trim().slice(0,1) === '<')
                    ? content
                    : '<pre>' + content.replace(/[<>&]/g, c => ({'<':'&lt;','>':'&gt;','&':'&amp;'}[c])) + '</pre>';
            } catch (error) {
                output.textContent = 'Error: ' + error.message;
            }
        });
    </script>
</body>
</html>
